# Version-aware dependencies targeting latest compatible releases by platform and Python version
# Core libs (unpinned to allow latest compatible)
--extra-index-url https://pkgs.dev.azure.com/azure-public/vside/_packaging/tensorflow-directml/pypi/simple/
matplotlib
Pillow
tqdm
scikit-learn>=1.5,<2

# SciPy: ensure compatibility with NumPy major versions
scipy>=1.10,<1.14; python_version < "3.12"
scipy>=1.14,<2; python_version >= "3.12"

# Windows + DirectML (GPU on NVIDIA/AMD/Intel)
# Python < 3.12 (TensorFlow 2.10 generation aligned with DirectML plugin)
numpy==1.23.5; platform_system == "Windows" and python_version < "3.12"
protobuf>=3.9.2,<3.20.1; platform_system == "Windows" and python_version < "3.12"
tensorflow-cpu==2.10.0; platform_system == "Windows" and python_version < "3.12"
tensorflow-directml-plugin==0.4.0.dev230202; platform_system == "Windows" and python_version < "3.12"

# Python >= 3.12 (TensorFlow 2.17+ generation with NumPy 2)
numpy>=2.1,<3; platform_system == "Windows" and python_version >= "3.12"
protobuf>=4.25,<5; platform_system == "Windows" and python_version >= "3.12"
ml_dtypes>=0.4.0; platform_system == "Windows" and python_version >= "3.12"
tensorflow-cpu>=2.17,<3; platform_system == "Windows" and python_version >= "3.12"
tensorflow-directml-plugin>=0.5.0; platform_system == "Windows" and python_version >= "3.12"

# Non-Windows (Linux/macOS)
# Python < 3.12
numpy==1.26.4; platform_system != "Windows" and python_version < "3.12"
protobuf==3.20.*; platform_system != "Windows" and python_version < "3.12"
ml_dtypes==0.2.0; platform_system != "Windows" and python_version < "3.12"
tensorflow==2.15.0; platform_system != "Windows" and python_version < "3.12"

# Python >= 3.12
numpy>=2.1,<3; platform_system != "Windows" and python_version >= "3.12"
protobuf>=4.25,<5; platform_system != "Windows" and python_version >= "3.12"
ml_dtypes>=0.4.0; platform_system != "Windows" and python_version >= "3.12"
tensorflow>=2.17,<3; platform_system != "Windows" and python_version >= "3.12"


# TF runtime dependencies to satisfy TensorFlow/TensorBoard requirements and fix broken installs
# Windows, Python < 3.12 (TF 2.15 generation)
absl-py>=1.0.0; platform_system == "Windows" and python_version < "3.12"
astunparse>=1.6.0; platform_system == "Windows" and python_version < "3.12"
gast!=0.5.0,!=0.5.1,!=0.5.2,>=0.2.1; platform_system == "Windows" and python_version < "3.12"
google-pasta>=0.1.1; platform_system == "Windows" and python_version < "3.12"
termcolor>=1.1.0; platform_system == "Windows" and python_version < "3.12"
markdown>=2.6.8; platform_system == "Windows" and python_version < "3.12"
werkzeug>=1.0.1; platform_system == "Windows" and python_version < "3.12"
tensorboard==2.15.*; platform_system == "Windows" and python_version < "3.12"

# Windows, Python >= 3.12 (TF 2.17+ generation)
absl-py>=1.0.0; platform_system == "Windows" and python_version >= "3.12"
termcolor>=1.1.0; platform_system == "Windows" and python_version >= "3.12"
google-pasta>=0.1.1; platform_system == "Windows" and python_version >= "3.12"
tensorboard>=2.17,<3; platform_system == "Windows" and python_version >= "3.12"
markdown>=2.6.8; platform_system == "Windows" and python_version >= "3.12"
werkzeug>=1.0.1; platform_system == "Windows" and python_version >= "3.12"

# Non-Windows, Python < 3.12
absl-py>=1.0.0; platform_system != "Windows" and python_version < "3.12"
astunparse>=1.6.0; platform_system != "Windows" and python_version < "3.12"
gast!=0.5.0,!=0.5.1,!=0.5.2,>=0.2.1; platform_system != "Windows" and python_version < "3.12"
google-pasta>=0.1.1; platform_system != "Windows" and python_version < "3.12"
termcolor>=1.1.0; platform_system != "Windows" and python_version < "3.12"
markdown>=2.6.8; platform_system != "Windows" and python_version < "3.12"
werkzeug>=1.0.1; platform_system != "Windows" and python_version < "3.12"
tensorboard==2.15.*; platform_system != "Windows" and python_version < "3.12"

# Non-Windows, Python >= 3.12
absl-py>=1.0.0; platform_system != "Windows" and python_version >= "3.12"
termcolor>=1.1.0; platform_system != "Windows" and python_version >= "3.12"
google-pasta>=0.1.1; platform_system != "Windows" and python_version >= "3.12"
tensorboard>=2.17,<3; platform_system != "Windows" and python_version >= "3.12"
markdown>=2.6.8; platform_system != "Windows" and python_version >= "3.12"
werkzeug>=1.0.1; platform_system != "Windows" and python_version >= "3.12"
